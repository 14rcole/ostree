From 9cd7957d9ba16d341e31e053ced6d932949cbdc0 Mon Sep 17 00:00:00 2001
From: Colin Walters <walters@verbum.org>
Date: Wed, 18 Jan 2012 22:06:58 -0500
Subject: [PATCH] build: Add --disable-documentation option

This helps operating system builders.
---
 Makefile.am  |    9 +++++++--
 configure.ac |    5 +++++
 2 files changed, 12 insertions(+), 2 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index 9111350..a136218 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -4,9 +4,14 @@ if WITH_MOBLIN
 MOBLIN_DIR = moblin
 endif
 
-SUBDIRS = icons lib applet wizard sendto $(MOBLIN_DIR) docs po help
-
+SUBDIRS = icons lib applet wizard sendto $(MOBLIN_DIR) docs po
 DIST_SUBDIRS = $(DEF_SUBDIRS) moblin
+if ENABLE_DOCUMENTATION
+SUBDIRS += help
+else
+DIST_SUBDIRS += help
+endif
+
 EXTRA_DIST = intltool-extract.in intltool-update.in intltool-merge.in ChangeLog.pre-2.27 gtk-doc.make gnome-doc-utils.make
 
 DISTCHECK_CONFIGURE_FLAGS = --disable-schemas-install \
diff --git a/configure.ac b/configure.ac
index 9d8a7f2..e43c79d 100644
--- a/configure.ac
+++ b/configure.ac
@@ -182,6 +182,11 @@ GNOME_COMPILE_WARNINGS([maximum])
 GNOME_CXX_WARNINGS
 GNOME_MAINTAINER_MODE_DEFINES
 
+AC_ARG_ENABLE([documentation],
+	AS_HELP_STRING([--enable-documentation], [enable man pages and HTML]),
+	[], [enable_documentation=yes])
+AM_CONDITIONAL(ENABLE_DOCUMENTATION, test x$enable_documentation = xyes)
+
 GNOME_DOC_INIT
 
 AC_OUTPUT(Makefile
-- 
1.7.6.5

